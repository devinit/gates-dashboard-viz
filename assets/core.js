(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(28)},13:function(e,t,n){},14:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);n(13);var a=n(9),r=n(3),o=function(){function e(){this.id=Math.random(),this.state={},this.listeners=[],Object(r.d)(this,{state:r.e,setState:r.a,getState:r.c})}var t=e.prototype;return t.setState=function(e,t){void 0===t&&(t=!0),this.state=t?Object.assign({},this.state,e):e},t.addListener=function(e){return this.listeners=this.listeners.concat(Object(r.b)(e)),this.listeners.length-1},t.removeListener=function(e){e<this.listeners.length&&this.listeners[e]&&(this.listeners[e](),this.listeners[e]=null)},t.resetListeners=function(){this.listeners=[]},Object(a.a)(e,[{key:"getState",get:function(){return this.state}}]),e}();window.DIState=new o;n(14);var i=n(0),u=n.n(i),c=n(1),d=function(e){return u.a.createElement("div",{className:"table-styled"},u.a.createElement("table",null,e.children))},s=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return u.a.createElement("tr",{key:n},e.map((function(e,n){return t?u.a.createElement("th",{key:n},e):u.a.createElement("td",{key:n},e)})))}))};return u.a.createElement(d,null,u.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),u.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},l=["Reproductive health care","Family planning"],f=[2012,2021],p=[2017,2021],m=n(10);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var w=function(e,t){void 0===t&&(t="");var n=Number(e);return isNaN(n)?t:new Intl.NumberFormat("en-IN",{maximumFractionDigits:2}).format(n)},g=function(e,t){return e.map((function(e){var n;return Object.assign({},e,((n={})[t]=e[t]?Number(e[t]):"NA",n))}))},b=function(e){return new Promise((function(t){Object(m.parse)(e,{download:!0,header:!0,complete:function(e){var n=e.data;return t(n)}})}))},y=function(e,t,n){return e.filter((function(e){return e[n]===t}))},S=function(e,t,n){return e.filter((function(e){return e[n]===t}))},I=function(e,t,n){return e.filter((function(e){return t.includes(e[n])}))},D=function(e,t){window.DIState&&e.length?(t&&window.DIState.setState(t),e.forEach((function(e){var t=e.url,n=e.state;b(t).then((function(e){var t;window.DIState.setState(((t={})[n]=e||[],t))}))}))):console.log("State is not defined")},_=function(e){for(var t,n=e[1]-e[0]+1,a=[],r=h(Array(n).keys());!(t=r()).done;){var o=t.value;a.push(o)}return a.map((function(t){return e[0]+t}))},E=function(e,t,n){return t.reduce((function(t,a){var r=e.filter((function(e){return""+e.year==""+a})).reduce((function(e,t){return e+Number(t[n]||0)}),0);return t.concat(r)}),[])},N=function(e,t){return e.map((function(e){return Object.assign({},e,{year:Number(e[t])})}))},L=b,C=function(e,t,n){var a=_(f),r=["Purpose code"].concat(a),o=l.map((function(e){var n=I(t,[e],"purpose_name");return[e].concat(function(e,t,n){return t.map((function(t){var a=e.find((function(e){return""+e.year==""+t}));return a?Number(a[n])||"":0}))}(n,a,"usd_disbursement_deflated_Sum"))})),u=r.map((function(e,t){return 0===t?"Total":w(o.reduce((function(e,n){return"number"==typeof n[t]?e+n[t]:e}),0))})),d=o.map((function(e){return e.map((function(e){return"number"==typeof e?w(e):e}))})),p=[r].concat(d,[u]);Object(c.render)(Object(i.createElement)(s,{country:n,rows:p}),e)},O=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();window.DIState?window.DIState.addListener((function(){t.showLoading();var n=window.DIState.getState,a=n.country,r=n.dataOne;if(a&&r){var o=I(S(r,a||"United States","donor_name"),l,"purpose_name");C(e,o,a||"United States"),t.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},A=function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,["spotlight-banner","data-selector--wrapper"]),e.parentElement.insertBefore(n,e),n},x=function(e,t){var n=document.createElement("option");n.value="string"==typeof t?t:t.value,n.text="string"==typeof t?t:t.label,e.appendChild(n)},U=function(e){var t,n=e.wrapper,a=e.options,r=e.defaultOption,o=e.allItemsLabel,i=e.className,u=e.label,c=document.createElement("select");if((t=c.classList).add.apply(t,["data-selector","js-plotly-chart-data-selector",i]),o&&x(c,{label:o,value:"*"}),a.forEach((function(e){return x(c,e)})),c.classList.add("data-selector--active"),r&&(c.value=r),u){var d=document.createElement("label");d.innerHTML=u;var s=document.createElement("div");s.classList.add("labelled-data-selector--wrapper"),s.appendChild(d),s.appendChild(c),n.appendChild(s)}else n.appendChild(c);return c},j=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();L("https://raw.githubusercontent.com/devinit/di-website-data/main/2022/rh-and-fp-dropdowns.csv").then((function(n){var a=A(e),r=U({wrapper:a,options:n.map((function(e){return e.Donors})),defaultOption:"United States",className:"country-filter",label:"Select donor"});window.DIState&&window.DIState.setState({country:"United States"}),r.addEventListener("change",(function(e){var t=e.currentTarget.value;window.DIState&&window.DIState.setState({country:t})})),t.hideLoading(),e.parentElement.classList.add("auto-height")}))}))}}})},k=n(2),T=n.n(k);var F={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0a3a64","#00538e","#1060a3","#4397d3","#77adde","#a3c7eb","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"]},R={legend:{top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{trigger:"axis",textStyle:{fontFamily:"Geomanist Regular,sans-serif"},axisPointer:{type:"none"}},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!1,title:"Save as image",pixelRatio:2}},right:20,tooltip:{show:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif",formatter:function(e){return"<div>"+e.title+"</div>"}}}},color:F.rainbow,xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},axisPointer:{type:"none"},grid:{top:10}},P=u.a.createElement("div",{className:"no-data"},"No Data"),$=function(){return P},M=function(e,t,n,a,r){var o=I(e,[t],r);return E(o,n,a)},G=function(e,t){void 0===t&&(t=!0),t?e.classList.remove("invisible"):e.classList.add("invisible")},H=function(e){e.classList.add("no-data--wrapper"),Object(c.unmountComponentAtNode)(e),Object(c.render)(Object(i.createElement)($),e)},B=function(e){e.classList.remove("no-data--wrapper"),Object(c.unmountComponentAtNode)(e)},Y=function(e,t){return l.map((function(n){return{name:n,type:"bar",stack:"oda",tooltip:{valueFormatter:function(e){return"US$"+w(e)+" million"}},data:M(e,n,t,"usd_disbursement_deflated_Sum","purpose_name")}})).map((function(e,t,n){return t===n.length-1?Object.assign({},e,{label:{normal:{show:!0,position:"top",fontFamily:"Geomanist Regular,sans-serif",formatter:function(e){var t=n.reduce((function(t,n){var a=n.data[e.dataIndex];return t+parseFloat(a||0)}),0);return w(t)},color:"#000000"}}}):e}))},z=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n=A(e);window.DIState?window.DIState.addListener((function(){t.showLoading();var a=window.DIState.getState,r=a.country,o=a.dataOne;if(r&&o){var i=I(S(o,r||"United States","donor_name"),l,"purpose_name");!function(e,t,n){if(!n.length)return G(e,!1),void H(t);G(e),B(t);var a=window.echarts.init(e),r=_(f),o=T()(R,{legend:{show:!0,selectedMode:!1},xAxis:{type:"category",data:r},yAxis:{type:"value",name:"US$ millions (constant ".concat(r[r.length-1]," prices)"),nameLocation:"middle",nameGap:50},grid:{top:60},series:Y(n,r)});o.color=["#e84439","#f8c1b2"].concat(o.color),a.setOption(o)}(e,n,i),t.hideLoading()}})):(console.log("State is not defined"),t.hideLoading())}))}}})},J=function(e,t){var n=e.reduce((function(e,t){return e.includes(t.aid_type_di_name)||e.push(t.aid_type_di_name),e}),[]),a=n.map((function(n){return M(e,n,t,"usd_disbursement_deflated_Sum","aid_type_di_name")})),r=function(e,t){var n=Object.keys(t).map((function(e){var n;return(n={})[e]=t[e].reduce((function(e,t){return e+t}),0),n}));return e.map((function(e){return e.map((function(e,t){var a=parseFloat(e),r=parseFloat(n[t]?n[t][t]:1);return isNaN(a)||isNaN(r)||0===a||0===a?0:a/r*100}))}))}(a,function(e){for(var t={},n=0;n<e.length;n++)for(var a=e[n],r=0;r<a.length;r++)t[r]=t[r]?t[r]:[],t[r].push(a[r]);return t}(a));return n.map((function(e,t){return{name:e,type:"bar",stack:"oda",data:r[t]}}))},q=function(e,t){var n=w(function(e,t,n){var a=I(e,[t],"aid_type_di_name");return E(a,n,"usd_disbursement_deflated_Sum")}(e,t.seriesName,[t.name]));return'\n    <div style="margin-bottom:8px;">\n      '+t.marker+t.seriesName+':\n      <span style="font-weight: bold;">\n        '+w(Number(t.value,10))+"% - US$"+n+" million\n      </span>\n    </div>"},K=function(e,t,n){if(!n.length)return G(e,!1),void H(t);G(e),B(t);var a=window.echarts.init(e),r=_(p),o=T()(R,{legend:{show:!0,selectedMode:!1},tooltip:{trigger:"axis",formatter:function(e){return e.map((function(e){return q(n,e)})).join("")}},xAxis:{type:"category",data:r},yAxis:{type:"value",axisLabel:{formatter:"{value}%"},max:100},grid:{top:60},series:J(n,r)});o.color=["#f8c1b2","#f0826d","#bc2629","#8f1b13"].concat(o.color),a.setOption(o,{replaceMerge:["series"]})},Q=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=A(e),r=A(e),o="Reproductive health care";window.DIState?window.DIState.addListener((function(){t.showLoading();var i=window.DIState.getState,u=i.country,c=i.odaAidType;if(u&&c){var d=I(S(c,u||"United States","donor_name"),[o],"purpose_name");n||(n=U({wrapper:a,options:c.reduce((function(e,t){var n=t.purpose_name;return n&&!e.includes(n)?e.concat(n):e}),[]),defaultOption:o,className:"purpose-code-filter",label:"Select purpose code"})).addEventListener("change",(function(t){o=t.target.value;var n=window.DIState.getState.country,a=I(S(c,n||"United States","donor_name"),[o],"purpose_name");K(e,r,a)})),K(e,r,d),t.hideLoading()}})):(console.log("State is not defined"),t.hideLoading())}))}}})},V=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(n,a){return u.a.createElement("tr",{key:a},n.map((function(n,r){return t?u.a.createElement("th",{key:r},n):a===e.length-1&&0===r?u.a.createElement("td",{colSpan:2,key:r},n):u.a.createElement("td",{key:r},n)})))}))};return u.a.createElement(d,null,u.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),u.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))};function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Z=function(e,t,n,a){for(var r,o=[2017,2021],u=[],d=W(Array(o[1]-o[0]+1).keys());!(r=d()).done;){var s=r.value;u.push(s)}var l=["Rank","Recipient"].concat(u.map((function(e){return o[0]+e}))),f=e.filter((function(e){return n===e["Code type"]})),p=function(e){var t=[].concat(e),n=[];if(e.length<10)for(var a=0;a<e.length;a++)if(t.length>=1){var r=t.reduce((function(e,t){return Number(e[2021])<Number(t[2021])?t:e}));n.push(r);var o=t.indexOf(r);t.splice(o,1)}for(var i=0;i<10;i++)if(t.length>=1){var u=t.reduce((function(e,t){return Number(e[2021])<Number(t[2021])?t:e}));n.push(u);var c=t.indexOf(u);t.splice(c,1)}return{sortedData:n,unsortedData:t}}(S(f,t,"donor_name")),m=p.sortedData,h=function(e,t){return t.map((function(t){var n=e.map((function(e){return Number(e[t])})).reduce((function(e,t){return e+t}),0);return w(n,0)}))}(p.unsortedData,u.map((function(e){return(o[0]+e).toString()}))),v=[l].concat(function(e){var t=[];if(e.length<10){if(0===e.length)return t;for(var n=0;n<e.length;n++)e.length>=1&&t.push([n+1,e[n].recipient_name,w(Number(e[n][2017]),0),w(Number(e[n][2018]),0),w(Number(e[n][2019]),0),w(Number(e[n][2020]),0),w(Number(e[n][2021]),0)]);return t}for(var a=0;a<10;a++)e.length>=1&&t.push([a+1,e[a].recipient_name,w(Number(e[a][2017]),0),w(Number(e[a][2018]),0),w(Number(e[a][2019]),0),w(Number(e[a][2020]),0),w(Number(e[a][2021]),0)]);return t}(m)).concat([["Total of all other recipients"].concat(h)]);Object(c.render)(Object(i.createElement)(V,{rows:v}),a)},ee=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=A(e),r="Reproductive health care and family planning",o="United States";window.DIState?window.DIState.addListener((function(){t.showLoading();var i=window.DIState.getState,u=i.country,c=i.dataTwo;(o=u)&&c&&(n||(n=U({wrapper:a,options:c.reduce((function(e,t){var n=t["Code type"];return n&&!e.includes(n)?e.concat(n):e}),[]),defaultOption:r,className:"purpose-code-filter",label:"Select purpose code"})).addEventListener("change",(function(t){r=t.target.value,Z(c,o,r,e)})),Z(c,o,r,e),t.hideLoading(),e.parentElement.classList.add("auto-height"))})):(console.log("State is not defined"),t.hideLoading())}))}}})},te=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return u.a.createElement("tr",{key:n},e.map((function(e,n){return t?u.a.createElement("th",{key:n},e):u.a.createElement("td",{key:n},e)})))}))};return u.a.createElement(d,null,u.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),u.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},ne=function(e,t,n,a){var r=S(t,n||"United States","donor_name"),o=function(e,t){var n=[["Aid Type",2021,"% Total"]],a=e.reduce((function(e,t){var n=t.aid_type_di_name;return n&&!e.includes(n)&&e.push(n),e}),[]),r=t.map((function(e){return Number(e.usd_disbursement_deflated_Sum)})).reduce((function(e,t){return e+t}),0),o=a.map((function(e){var n=t.find((function(t){return t.aid_type_di_name===e})),a=n?n.usd_disbursement_deflated_Sum:0,o=0!==a?(w(a/r*100)||0)+"%":0;return[e].concat(w(a,0),[o])}));return n.concat(o,[["Total",w(r,0),r?"100%":"0%"]])}(t,function(e){return e.filter((function(e){return""+e.year=="2021"}))}(I(r,a,"purpose_name")));Object(c.render)(Object(i.createElement)(te,{country:n,rows:o}),e)},ae=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t,n=new window.DICharts.Chart(e.parentElement);n.showLoading();var a="United States";window.DIState?window.DIState.addListener((function(){n.showLoading();var r=window.DIState.getState,o=r.country,i=r.odaAidType;if((a=o)&&i){var u=function(e,t){void 0===t&&(t="purpose_name");var n=[];return e.forEach((function(e){e[t]&&!n.includes(e[t])&&n.push(e[t])})),n}(i),c=u[0];if(!t){var d=A(e);(t=U({wrapper:d,options:u,defaultOption:c,className:"purpose-code-filter",label:"Select purpose code"})).addEventListener("change",(function(t){c=t.target.value,ne(e,i,a||"United States",c)}))}ne(e,i,a||"United States",c),n.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},re=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return u.a.createElement("tr",{key:n},e.map((function(e,n){return t?u.a.createElement("th",{key:n},e):u.a.createElement("td",{key:n},e)})))}))};return u.a.createElement(d,null,u.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),u.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},oe={"University, College Or Other Teaching Institution, Research Institute Or Think?Tank":"University, other teaching institution, research institute or think-tank"},ie=function(e,t,n){var a,r,o=["Channel"].concat(2021,"% Total"),u=(a=function(e){return e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t.oecd_aggregated_channel]=parseFloat(e[t.oecd_aggregated_channel]||0)+parseFloat(t.usd_disbursement_deflated_Sum||0),n))}),{})}(t),r=Object.keys(a).reduce((function(e,t){return e+Number(a[t]||0)}),0),Object.keys(a).map((function(e){return[oe[e]||e,w(a[e]),(w(a[e]/r*100||0)||0)+"%"]})).concat([["Total",w(r),r?"100%":"0%"]])),d=[o].concat(u);Object(c.render)(Object(i.createElement)(re,{country:n,rows:d}),e)},ue=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=A(e),r="United States";window.DIState?window.DIState.addListener((function(){t.showLoading();var o=window.DIState.getState,i=o.country,u=o.odaChannels,c=o.purpose;if((r=i)&&u){var d=function(e){return e.reduce((function(e,t){return t.purpose_name&&!e.includes(t.purpose_name)?e.concat(t.purpose_name):e}),[])}(u),s=I(S(u,r||"United States","donor_name"),c||d[0],"purpose_name");n||(n=U({wrapper:a,options:d,defaultOption:d[0],className:"purpose-code-filter",label:"Select purpose code"}),o&&window.DIState.setState({purpose:d[0]}),n.addEventListener("change",(function(e){window.DIState.setState({purpose:e.target.value})}))),ie(e,s,r||"United States"),t.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},ce=n(11),de=n.n(ce),se=n(6),le=n.n(se),fe=function(e){var t=e.data,n=e.position;return u.a.createElement("div",{className:le()("custom-legend",{right:"right"===n})},t.map((function(e,t){return u.a.createElement("div",{className:le()("legend-item",{label:e.label}),key:""+t},!e.label&&e.colour?u.a.createElement("span",{className:"badge",style:{backgroundColor:e.colour}}):null,u.a.createElement("span",{className:"text"},e.caption))})))};fe.defaultProps={data:[]};var pe=fe,me={"University, College Or Other Teaching Institution, Research Institute Or Think?Tank":"University, other teaching institution, research institute or think-tank"},he=function(e,t,n){void 0===n&&(n="right"),Object(c.render)(Object(i.createElement)(pe,{data:t,position:n}),e)},ve=function(e,t,n,a,r){a.push({caption:"Breakdown",label:!0}),a=a.concat(we(t,n,r)),he(e,a)},we=function(e,t,n){return e.children.sort((function(e,t){return e.value-t.value})).reverse().map((function(e){if(e.value){var a=w(e.value/t.value*100),r=de()(n).lighten(.2);return{caption:e.name+" | US$"+w(e.value)+" million - "+a+"%",colour:r.hex()}}return{caption:e.name,colour:"#333"}}))},ge=function(e,t,n,a,r){!function(e,t,n){if(!t.length)return e.classList.add("invisible"),void H(n);e.classList.remove("invisible"),B(n);var a=window.echarts.init(e),r=F.rainbow,o=t.map((function(e,t){return{caption:e.name,colour:r[t]}})),i=function(){return he(n,o)},u={tooltip:{show:!0,trigger:"item",formatter:function(e){if(!e.name)return"Go Back";if(e.treePathInfo.length>1){var t=e.treePathInfo[e.treePathInfo.length-2],n=w(e.value/t.value*100);return e.name+" | US$"+w(e.value)+" million - "+n+"%"}return e.name+" | US$"+w(e.value)+" million"}},xAxis:{show:!1},yAxis:{show:!1},series:{type:"sunburst",nodeClick:!1,emphasis:{focus:"descendant"},sort:void 0,data:t.map((function(e,t){return e.itemStyle={color:r[t]},e})),radius:["20%","100%"],label:{show:!1},levels:[{itemStyle:{color:"#333",opacity:.7},r:120},{r:145},{radius:[150,170]}]},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!1}}}};a.setOption(Object.assign({},T()(R,u),{color:r})),i(),a.on("mouseover",(function(e){if(e.name){var a=o.filter((function(t){return e.treePathInfo.find((function(e){return e.name===t.caption}))}));if(e.treePathInfo.length>1){var r=t.find((function(t){return t.name===e.name}));if(r&&r.children)return void ve(n,r,e,a,e.color);var i=e.treePathInfo[e.treePathInfo.length-2],u=t.find((function(e){return e.name===i.name}));u&&u.children?ve(n,u,i,a,a[0].colour):he(n,a)}}})),a.on("mouseout",(function(){i()}))}(e,function(e,t){var n=e.map((function(e){var n;return Object.assign({},e,((n={})[t.parent]=me[e[t.parent]]||e[t.parent],n[t.child]=me[e[t.child]]||e[t.child],n))}));return n.map((function(e){var n;return e[t.value]?Object.assign({},e,((n={})[t.value]=w(e[t.value]),n)):e})).reduce((function(e,n){return e.includes(n[t.parent])?e:e.concat(n[t.parent])}),[]).map((function(e){return function(e,t,n,a){var r={name:t},o=e.filter((function(e){return e[n.parent]===("string"==typeof t?t:t[n.parent])}));if(o.length)r.children=o.map((function(e){return{name:e[n.child],value:e[n.value]}}));else if("string"==typeof t){var i=e.find((function(e){return e[n.parent]===t}));r.value=i[n.value]}else r.value=t[n.value];return a&&(r.itemStyle={color:a}),r}(n,e,t)}))}(I(S(t,n||"United States","donor_name"),a,"purpose_name"),{parent:"oecd_aggregated_channel",child:"oecd_channel_parent_name",value:"usd_disbursement_deflated_Sum"}),r)},be=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t,n,a=new window.DICharts.Chart(e.parentElement),r=A(e),o="United States";if(window.DIState){var i=A(e);window.DIState.addListener((function(){a.showLoading();var u=window.DIState.getState,c=u.country,d=u.odaChannels;if((o=c)&&d){if(!t){var s=function(e,t){return e.reduce((function(e,n){var a=n[t];return a&&!e.includes(a)?e.concat(a):e}),[])}(d,"purpose_name");n=s[0],(t=U({wrapper:r,options:s,defaultOption:n,className:"purpose-code-filter",label:"Select purpose code"})).addEventListener("change",(function(t){n=t.target.value,ge(e,g(d,"usd_disbursement_deflated_Sum"),o,n,i)}))}ge(e,g(d,"usd_disbursement_deflated_Sum"),o,n,i),a.hideLoading(),e.parentElement.classList.add("auto-height")}}))}else console.log("State is not defined")}))}}})},ye=function(){D([{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/RH_and_FP_Purpose_code_trends_chart_OECD.csv",state:"dataOne"},{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/donor_by_recip_2019.csv",state:"dataTwo"},{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/RH_FP_aid_type_OECD.csv",state:"odaAidType"},{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/RH_FP_channels_OECD.csv",state:"odaChannels"}],{country:"United States"}),j("dicharts--donor-selector"),O("dicharts--table-one"),z("dicharts--chart-one"),Q("dicharts--chart-two"),ee("dicharts--table-two"),ae("dicharts--table-three"),ue("dicharts--table-four"),be("dicharts--chart-three")},Se=(n(27),["Reproductive health care","Family planning"]),Ie=[2019,2021],De=function(e,t){var n,a=Object(r.f)(e).filter((function(e){return e.purpose_name===t&&e.year>=2019&&e.year<=2021})).map((function(e){return{year:e.year,value:e.x_transaction_value_usd_m_Sum}}));return n={},a.forEach((function(e){n[e.year]?n[e.year]=Object.assign({},n[e.year],{value:(parseFloat(e.value?e.value:0)+parseFloat(n[e.year].value?n[e.year].value:0)).toFixed(3)}):n[e.year]=e})),Object.values(n).map((function(e){return e.value}))},_e=function(e,t){return Se.map((function(t){return{name:t,type:"bar",stack:"oda",tooltip:{valueFormatter:function(e){return"US$"+w(e)+" million"}},data:De(e,t)}})).map((function(e,t,n){return t===n.length-1?Object.assign({},e,{label:{normal:{show:!0,position:"top",formatter:function(e){var t=n.reduce((function(t,n){var a=n.data[e.dataIndex];return t+parseFloat(a||0)}),0);return w(t)},color:"#000000"}}}):e}))},Ee=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n=A(e);window.DIState?window.DIState.addListener((function(){t.showLoading();var a=window.DIState.getState,r=a.countryIati,o=a.dataOneIati;if(r&&o){var i=I(y(o,r||"US","Reporting Organisation Narrative"),Se,"purpose_name");!function(e,t,n){if(!n.length)return G(e,!1),void H(t);G(e),B(t);var a=window.echarts.init(e),r=_(Ie),o=T()(R,{legend:{show:!0,selectedMode:!1},xAxis:{type:"category",data:r},yAxis:{type:"value",name:"USD$ millions (constant 2019 prices)",nameLocation:"middle",nameGap:50},grid:{top:60},series:_e(n)});o.color=["#e84439","#f8c1b2"].concat(o.color),a.setOption(o)}(e,n,i),t.hideLoading()}})):(console.log("State is not defined"),t.hideLoading())}))}}})},Ne=[2019,2021],Le=function(e,t){var n=e.reduce((function(e,t){return e.includes(t["Aid Type Di Name"])||e.push(t["Aid Type Di Name"]),e}),[]),a=n.map((function(n){return M(e,n,t,"Usd Disbursement Deflated Sum","Aid Type Di Name")})),r=function(e,t){var n=Object.keys(t).map((function(e){var n;return(n={})[e]=t[e].reduce((function(e,t){return e+t}),0),n}));return e.map((function(e){return e.map((function(e,t){var a=parseFloat(e),r=parseFloat(n[t]?n[t][t]:1);return isNaN(a)||isNaN(r)||0===a||0===a?0:a/r*100}))}))}(a,function(e){for(var t={},n=0;n<e.length;n++)for(var a=e[n],r=0;r<a.length;r++)t[r]=t[r]?t[r]:[],t[r].push(a[r]);return t}(a));return n.map((function(e,t){return{name:e,type:"bar",stack:"oda",data:r[t]}}))},Ce=function(e,t){var n=w(function(e,t,n){var a=I(e,[t],"Aid Type Di Name");return E(a,n,"Usd Disbursement Deflated Sum")}(e,t.seriesName,[t.name]));return'\n    <div style="margin-bottom:8px;">\n      '+t.marker+t.seriesName+':\n      <span style="font-weight: bold;">\n        '+w(Number(t.value,10))+"% - US$"+n+" million\n      </span>\n    </div>"},Oe=function(e,t,n){if(!n.length)return G(e,!1),void H(t);G(e),B(t);var a=window.echarts.init(e),r=_(Ne),o=T()(R,{legend:{show:!0,selectedMode:!1},tooltip:{trigger:"axis",formatter:function(e){return e.map((function(e){return Ce(n,e)})).join("")}},xAxis:{type:"category",data:r},yAxis:{type:"value",axisLabel:{formatter:"{value}%"},max:100},grid:{top:60},series:Le(n,r)});o.color=["#f8c1b2","#f0826d","#e84439","#bc2629","#8f1b13"].concat(o.color),a.setOption(o,{replaceMerge:["series"]})},Ae=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=A(e),r=A(e),o="Reproductive health care";window.DIState?window.DIState.addListener((function(){t.showLoading();var i=window.DIState.getState,u=i.countryIati,c=i.dataFourIati;if(u&&c){var d=N(I(y(c,u||"US","Donor Name"),[o],"Purpose Name"),"Year");n||(n=U({wrapper:a,options:c.reduce((function(e,t){var n=t["Purpose Name"];return n&&!e.includes(n)?e.concat(n):e}),[]),defaultOption:o,className:"purpose-code-filter",label:"Select purpose code"})).addEventListener("change",(function(t){o=t.target.value;var n=window.DIState.getState.countryIati,a=N(I(y(c,n||"US","Donor Name"),[o],"Purpose Name"),"Year");Oe(e,r,a)})),Oe(e,r,d),t.hideLoading()}})):(console.log("State is not defined"),t.hideLoading())}))}}})},xe=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n=[],a=A(e);window.DIState?window.DIState.addListener((function(){t.showLoading();var r=window.DIState.getState.dataOneIati;if(r&&r.length&&!n.length){n=r.reduce((function(e,t){var n=t["Reporting Organisation Narrative"];return e.includes(n)?e:e.concat(n)}),[]).filter((function(e){return!!e})).sort((function(e,t){var n=e.toUpperCase(),a=t.toUpperCase();return n<a?-1:n>a?1:0})).map((function(e){return{label:e,value:e}}));var o=U({wrapper:a,options:n,defaultOption:"US",className:"country-filter-iati",label:"Select Donor"});window.DIState&&window.DIState.setState({countryIati:"US"}),o.addEventListener("change",(function(e){var t=e.currentTarget.value;window.DIState.setState({countryIati:t})})),t.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},Ue=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading(),window.DIState?window.DIState.addListener((function(){t.showLoading();var n=window.DIState.getState,a=n.countryIati,r=n.dataOneIati;if(a&&r){var o=I(y(r,a||"US","Reporting Organisation Narrative"),Se,"purpose_name");!function(e,t,n){var a=_(Ie),r=["Purpose code"].concat(a),o=[r].concat(Se.map((function(e){var n=I(t,[e],"purpose_name");return r.reduce((function(t,a,r){if(0===r)return t.concat(e);var o=n.filter((function(e){return parseFloat(e.year)===a})).reduce((function(e,t){return e+Number(t.x_transaction_value_usd_m_Sum)}),0);return t.concat(w(o))}),[])})));Object(c.render)(Object(i.createElement)(s,{country:n,rows:o}),e)}(e,o,a||"US"),t.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},je=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return u.a.createElement("tr",{key:n},e.map((function(e,n){return t?u.a.createElement("th",{key:n},e):u.a.createElement("td",{key:n},e)})))}))};return u.a.createElement(d,null,u.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),u.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},ke=function(e,t,n,a){var r=y(t,n||"US","Donor Name"),o=function(e,t){var n=[["Aid Type",2021,"% Total"]],a=e.reduce((function(e,t){return e.includes(t["Aid Type Di Name"])||void 0!==t["Aid Type Di Name"]&""!==t["Aid Type Di Name"]&&e.push(t["Aid Type Di Name"]),e}),[]),r=t.map((function(e){return Number(e["Usd Disbursement Deflated Sum"])})).reduce((function(e,t){return e+t}),0),o=a.map((function(e){var n=t.find((function(t){return t["Aid Type Di Name"]===e})),a=n?n["Usd Disbursement Deflated Sum"]:0,o=(w(a/r*100)||0)+"%";return[e].concat(w(a),[o])}));return n.concat(o,[["Total",w(r),r?"100%":"0%"]])}(t,function(e){return e.filter((function(e){return 2021===Number(e.Year)}))}(I(r,a,"Purpose Name")));Object(c.render)(Object(i.createElement)(je,{country:n,rows:o}),e)},Te=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t,n=new window.DICharts.Chart(e.parentElement);n.showLoading();var a="US";window.DIState?window.DIState.addListener((function(){n.showLoading();var r=window.DIState.getState,o=r.countryIati,i=r.dataFourIati;if((a=o)&&i){var u=function(e){var t=[];return e.forEach((function(e){t.includes(e["Purpose Name"])||void 0!==e["Purpose Name"]&&t.push(e["Purpose Name"])})),t}(i),c=u[0];if(!t){var d=A(e);(t=U({wrapper:d,options:u,defaultOption:c,className:"purpose-code-filter",label:"Select Purpose Code"})).addEventListener("change",(function(t){c=t.target.value,ke(e,i,a||"US",c)}))}ke(e,i,a||"US",c),n.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},Fe=[2019,2021],Re=function(e){return e+".0"},Pe=function(e,t,n,a){var r=_(Fe),o=["Rank","Recipient"].concat(r),u=e.filter((function(e){return n===e["Code type"]})),d=function(e){for(var t=[].concat(e),n=[],a=Fe[1],r=0;r<10;r++)if(t.length>=1){var o=t.reduce((function(e,t){return Number(e[Re(a)])<Number(t[Re(a)])?t:e}));n.push(o);var i=t.indexOf(o);t.splice(i,1)}return{sortedData:n,unsortedData:t}}(y(u,t,"Reporting Organisation Narrative")),s=d.sortedData,l=function(e,t){var n=[];return t.forEach((function(t){var a=e.map((function(e){return parseFloat(Number(e[Re(t)]))||0})).reduce((function(e,t){return e+t}),0);n.push(w(a))})),n}(d.unsortedData,r),f=[o].concat(function(e,t){for(var n=[],a=function(a){if(e.length>=1){var r=a+1;n.push([r,e[a].recipient_name].concat(t.map((function(t){return e[a][Re(t)]?w(e[a][Re(t)],0):0}))))}},r=0;r<e.length;r++)a(r);return n}(s,r)).concat([["All other recipients (sum)"].concat(l)]);Object(c.render)(Object(i.createElement)(V,{rows:f}),a)},$e=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=A(e);window.DIState?window.DIState.addListener((function(){t.showLoading();var r=window.DIState.getState,o=r.countryIati,i=r.dataTwoIati,u=r.purposeIati;o&&i&&(n||(n=U({wrapper:a,options:i.reduce((function(e,t){var n=t["Code type"];return e.includes(n)?e:e.concat(n)}),[]).filter((function(e){return!!e})).map((function(e){return{label:e,value:e}})),defaultOption:"Reproductive health care and family planning",className:"purpose-code-filter",label:"Select Purpose Code"}),window.DIState.setState({purposeIati:"Reproductive health care and family planning"}),n.addEventListener("change",(function(e){window.DIState.setState({purposeIati:e.target.value})}))),Pe(i,o,u,e),t.hideLoading(),e.parentElement.classList.add("auto-height"))})):(console.log("State is not defined"),t.hideLoading())}))}}})},Me=function(){D([{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/IATI-RHFP-data-v1.csv",state:"dataOneIati"},{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/IATI-RHFP-data-v2.csv",state:"dataTwoIati"},{url:"https://raw.githubusercontent.com/devinit/di-website-data/main/2022/iati_rhfp4.csv",state:"dataFourIati"}],{countryIati:"US"}),xe("dicharts--donor-selector-iati"),Ue("dicharts--table-one-iati"),Ee("dicharts--chart-one-iati"),$e("dicharts--table-two-iati"),Te("dicharts--table-three-iati"),Ae("dicharts--chart-two-iati")};window.addEventListener("load",(function(){ye(),Me()}))}},[[12,1,2]]]);